#!/bin/bash

# Default values
CONFIG_FILE="config.json"
OUTPUT_FORMAT="pdf"

# Parse command line arguments
while [[ $# -gt 0 ]]; do
    case $1 in
        --format)
            OUTPUT_FORMAT="$2"
            shift 2
            ;;
        *)
            CONFIG_FILE="$1"
            shift
            ;;
    esac
done

# Validate output format
if [[ ! "$OUTPUT_FORMAT" =~ ^(pdf|docx|html|md)$ ]]; then
    echo "Error: Invalid output format. Use pdf, docx, md, or html."
    exit 1
fi

# Run the Docker command
docker run --rm -v "$(pwd)":/data md2apa7-converter "$CONFIG_FILE" --format "$OUTPUT_FORMAT"
